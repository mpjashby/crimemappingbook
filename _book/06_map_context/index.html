<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Learn crime mapping with R - 6&nbsp; Giving a map context</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../07_handling_bugs/index.html" rel="next">
<link href="../05_your_second_crime_map/index.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><!-- START OF INCLUDED HEADER --><!--
This file contains code that will be included in the header of each page of the
quarto book
--><script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script><!-- END OF INCLUDED HEADER --><link rel="stylesheet" href="../css/styles.css">
<meta name="twitter:title" content="Learn crime mapping with R - 6&nbsp; Giving a map context">
<meta name="twitter:description" content="Add titles, sources, legends, scale bars and other contextual information to your maps">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">
<span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Giving a map context</span>
</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Learn crime mapping with R</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/mpjashby/crimemappingbook/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="../learn_crime_mapping_with_r.epub" title="Download ePub" class="sidebar-tool px-1"><i class="bi bi-journal"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Welcome!</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../00_setup/index.html" class="sidebar-item-text sidebar-link">Install the software needed for this book</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01_getting_started/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting started</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02_your_first_crime_map/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Your first crime map</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03_data_wrangling/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Wrangling data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04_code_with_style/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Code with style</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05_your_second_crime_map/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Your second crime map</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06_map_context/index.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Giving a map context</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07_handling_bugs/index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Handling bugs in your code</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appendices/read_functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Functions for reading data into R</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
    <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">In this chapter</h2>
   
  <ul class="collapse">
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">6.1</span>  Introduction</a></li>
  <li><a href="#map-choices" id="toc-map-choices" class="nav-link" data-scroll-target="#map-choices"><span class="toc-section-number">6.2</span>  Map choices</a></li>
  <li><a href="#visual-hierarchy" id="toc-visual-hierarchy" class="nav-link" data-scroll-target="#visual-hierarchy"><span class="toc-section-number">6.3</span>  Visual hierarchy</a></li>
  <li><a href="#supporting-elements" id="toc-supporting-elements" class="nav-link" data-scroll-target="#supporting-elements"><span class="toc-section-number">6.4</span>  Supporting elements</a></li>
  <li><a href="#creating-and-storing-a-map" id="toc-creating-and-storing-a-map" class="nav-link" data-scroll-target="#creating-and-storing-a-map"><span class="toc-section-number">6.5</span>  Creating and storing a map</a></li>
  <li><a href="#titles" id="toc-titles" class="nav-link" data-scroll-target="#titles"><span class="toc-section-number">6.6</span>  Titles</a></li>
  <li><a href="#legends" id="toc-legends" class="nav-link" data-scroll-target="#legends"><span class="toc-section-number">6.7</span>  Legends</a></li>
  <li><a href="#scales-and-north-arrows" id="toc-scales-and-north-arrows" class="nav-link" data-scroll-target="#scales-and-north-arrows"><span class="toc-section-number">6.8</span>  Scales and north arrows</a></li>
  <li><a href="#saving-maps" id="toc-saving-maps" class="nav-link" data-scroll-target="#saving-maps"><span class="toc-section-number">6.9</span>  Saving maps</a></li>
  <li><a href="#in-summary" id="toc-in-summary" class="nav-link" data-scroll-target="#in-summary"><span class="toc-section-number">6.10</span>  In summary</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/mpjashby/crimemappingbook/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title d-none d-lg-block">
<span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Giving a map context</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p><strong>Add titles, sources, legends, scale bars and other contextual information to your maps</strong></p>
<div class="box load-tutorial">
<p>To load the <a href="../#how-to-use-this-book">interactive tutorial</a> for this chapter, copy and paste the following code into the RStudio console:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>crimemapping<span class="sc">::</span><span class="fu">tutorial</span>(<span class="st">"06_map_context"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and press <code>Enter</code>.</p>
</div>
<section id="introduction" class="level2" data-number="6.1"><h2 data-number="6.1" class="anchored" data-anchor-id="introduction">
<span class="header-section-number">6.1</span> Introduction</h2>
<p>In this tutorial we will create this map of shootings in the Bronx borough of New York City in 2019. You’ll see that unlike the maps we have made so far, this map includes contextual elements such as a title, a legend and a scale bar.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/final-map-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>In this tutorial we will learn to add important context to our maps using these elements.</p>
</section><section id="map-choices" class="level2" data-number="6.2"><h2 data-number="6.2" class="anchored" data-anchor-id="map-choices">
<span class="header-section-number">6.2</span> Map choices</h2>
<p>Among the most important decisions you make when you are creating a map is what information to include and what to leave out. Watch this video to learn more about why this is important and how you can make those decisions.</p>
<div class="quarto-video ratio ratio-16x9"><iframe src="https://www.youtube.com/embed/2_YOwOmodG0" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>The most important thing to remember when designing a map is to keep in mind the purpose that the map will be used for. Research on how people use maps has repeatedly shown that “<a href="https://doi.org/10.4324/9781315736822.ch3">the nature of the task or function to be performed by the map user is the single most important factor in determining how [someone] processes the information on the map</a>”.</p>
<p>As explained in the video, when you create a crime map you should ask yourself:</p>
<ul>
<li>
<em>How much does my audience know about this topic?</em> so that you know how much information you should provide to help them understand it.</li>
<li>
<em>How well does my audience know this geographic area?</em> so that you know what information to include to help people orient themselves, e.g.&nbsp;landmarks, main roads of natural features such as rivers.</li>
<li>
<em>What will my audience use this map for?</em> so that you can make sure everything on your map is relevant to that goal.</li>
<li>
<em>In what context will they be using this map?</em> so that you can make the format of the map suitable to that context (e.g.&nbsp;if the map is going to be viewed by a large audience in a lecture hall, or by a police officer on their phone at night).</li>
<li>
<em>What biases or opinions about this topic might my audience have?</em> so that you can consider how the information (and your presentation of it) might influence those opinions or biases one way or another.</li>
</ul>
<p>Maps are powerful communication tools, which can sometimes knowingly or unknowingly mislead the reader. Watch this video to learn more about how maps can be misleading.</p>
<div class="quarto-video ratio ratio-16x9"><iframe src="https://www.youtube.com/embed/G0_MBrJnRq0" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>Whenever you make a map, think about your own biases – are your own views on a topic likely to influence the results of your analysis? One way to test your own assumptions about a topic is to test them against other potential assumptions using an approach to crime analysis called hypothesis testing. To find out more about the hypothesis testing approach, read the paper <a href="https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.1012.6309&amp;rep=rep1&amp;type=pdf"><em>Improving the explanatory content of analysis products using hypothesis testing</em></a></p>
</section><section id="visual-hierarchy" class="level2" data-number="6.3"><h2 data-number="6.3" class="anchored" data-anchor-id="visual-hierarchy">
<span class="header-section-number">6.3</span> Visual hierarchy</h2>
<p>Maps are among the most complex types of data visualisation. Even if we have chosen wisely what to include and what to leave out, there is likely to be lots of information on our map. For all but the simplest maps, there is a risk of readers – especially those in a hurry – might be overwhelmed or mislead by competing pieces of information (such as different layers of data) on a map.</p>
<p>To help readers understand what parts of a map they should focus most of their attention on and which are of less importance, we can establish a visual hierarchy. Watch this video to learn more about visual hierarchies in mapping.</p>
<div class="quarto-video ratio ratio-16x9"><iframe src="https://www.youtube.com/embed/ezz_SPl0Xr4" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>We have used some of the principles of visual hierarchy in the maps we have already made. For example, in the density map of bike thefts in Vancouver, we used strong colours to represent the data and shades of grey for the base map. This helped readers intuitively understand that they should focus most attention on the data.</p>
<div class="tutorial">
<div class="cell">

</div>
</div>
</section><section id="supporting-elements" class="level2" data-number="6.4"><h2 data-number="6.4" class="anchored" data-anchor-id="supporting-elements">
<span class="header-section-number">6.4</span> Supporting elements</h2>
<p>We can often make our maps much more useful by adding supporting elements that explain the map content, give context or provide extra information. Watch this video to find out what elements you can add to your maps to make them more useful.</p>
<div class="quarto-video ratio ratio-16x9"><iframe src="https://www.youtube.com/embed/uXUeb-qmgTc" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>We will not need to include every supporting element mentioned in the video in all the maps we make. The visual hierarchy that you establish in your map by use of size, colour, etc. should make it clear which elements are most important. The data should always come first in the visual hierarchy, usually followed by the title and then the legend. Other elements should be lower down the hierarchy. In every map, the supporting elements should be designed so that they do not distract from the data.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<caption>Visual hierarchy of elements in a crime map</caption>
<thead><tr class="header">
<th style="text-align: right;">place in hierarchy</th>
<th style="text-align: left;">map element</th>
<th style="text-align: right;">how often needed</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1st</td>
<td style="text-align: left;">data layers</td>
<td style="text-align: right;">always</td>
</tr>
<tr class="even">
<td style="text-align: right;">2nd</td>
<td style="text-align: left;">title</td>
<td style="text-align: right;">virtually always</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3rd</td>
<td style="text-align: left;">legend</td>
<td style="text-align: right;">usually</td>
</tr>
<tr class="even">
<td style="text-align: right;">4th</td>
<td style="text-align: left;">base map</td>
<td style="text-align: right;">almost always</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5th</td>
<td style="text-align: left;">author and date</td>
<td style="text-align: right;">virtually always</td>
</tr>
<tr class="even">
<td style="text-align: right;">=6th</td>
<td style="text-align: left;">scale</td>
<td style="text-align: right;">sometimes</td>
</tr>
<tr class="odd">
<td style="text-align: right;">=6th</td>
<td style="text-align: left;">north arrow</td>
<td style="text-align: right;">sometimes</td>
</tr>
<tr class="even">
<td style="text-align: right;">7th</td>
<td style="text-align: left;">grid</td>
<td style="text-align: right;">rarely</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Elements that are almost always needed on a crime map are not necessarily highest on the visual hierarchy. For example, the author name is virtually always needed but is relatively low on the visual hierarchy. This is because it is important information for readers who need it to judge the reliability of a map, or to get in touch to ask questions, but should not distract from the data for those readers who do not need it.</p>
<div class="tutorial">
<div class="cell">

</div>
</div>
<p>Before we start learning the code needed to add titles and legends to our maps, watch this video walk-though of the main steps.</p>
<div class="quarto-video ratio ratio-16x9"><iframe src="https://www.youtube.com/embed/P3L9yHc8H-8" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section><section id="creating-and-storing-a-map" class="level2" data-number="6.5"><h2 data-number="6.5" class="anchored" data-anchor-id="creating-and-storing-a-map">
<span class="header-section-number">6.5</span> Creating and storing a map</h2>
<p>Since we will be adding various elements to a map in this tutorial, we will first create a map and save it as an R object. Any map or chart produced using the <code>ggplot()</code> function can be saved as an object using the assignment operator <code>&lt;-</code>. Just as for the result of any other R function, if we save it to an object the result will not be printed to the screen, but we can easily see the plot by simply typing the object name in the R console.</p>
<div class="cell" data-exercise="true" data-exercise.lines="46">
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 267 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
dbl  (3): incident_key, longitude, latitude
lgl  (1): murder
date (1): occur_date

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `nyc_precincts' from data source 
  `https://mpjashby.github.io/crimemappingdata/nyc_precincts.gpkg' 
  using driver `GPKG'
Simple feature collection with 77 features and 4 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -74.25559 ymin: 40.49614 xmax: -73.70001 ymax: 40.91554
Geodetic CRS:  WGS 84</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Bandwidth set to 2,890 metres automatically based on rule of thumb</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Done: [--------------------------------------------------------------------] .
Done: [==================================================================--] .
Done: [===================================================================-] .
Done: [====================================================================] .
                                                                              </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: attribute variables are assumed to be spatially constant throughout
all geometries</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/title-exercise1-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>The code used to create this map is very similar to the code we used in one of the previous tutorials to make a map of bike theft in Vancouver, although there are a few differences.</p>
<p>Looking at the code above, we have used the <code>grid</code> argument to the <code>hotspot_kde()</code> function, specifying <code>hotspot_grid(precincts, cell_size = 100)</code>. By default, <code>hotspot_kde()</code> calculates density estimates (KDE values) for every grid cell within the area covered by the crime data. This is fine when at least a few crimes have occurred in all the parts of the area for which we have data. But if crime is heavily concentrated in a few places and there are large areas with no crimes, the density layer will not cover the whole area for which we have data. In this case, it is important to extend the density layer manually to make it clear that the apparent low density of crime in some places is due to a genuine lack of crime there, rather than because we do not have data for those places.</p>
<p>We can do this by creating a grid of cells for which KDE values should be calculated, rather than letting <code>hotspot_kde()</code> do this automatically. In the code above, we have used the <code>hotspot_grid()</code> function to create a grid that covers all the precincts in the Bronx (the area we have data for), and then passed the resulting grid to the <code>grid</code> argument of <code>hotspot_kde()</code>. This ensures that KDE values are calculated for every part of the Bronx.</p>
<p><a href="https://scales.r-lib.org" title="scales website"><img src="images/scales.png" class="right-side-image"></a></p>
<p>The only other difference from the Vancouver map is that we have used the <code>ordinal()</code> function from the <a href="https://scales.r-lib.org"><code>scales</code> package</a> to convert the precinct numbers to ordinal numbers (1st, 2nd, 3rd, etc.) for the map labels. This is because police precincts in New York City are usually referred to using ordinal numbers (e.g.&nbsp;“the 1st Precinct” rather than “Precinct 1”) and it will be easier for people to read the map if it uses terms they are familiar with.</p>
<p>There are many other functions in the <code>scales</code> package that format numbers in different ways, including <code>comma()</code> to add thousands separators to numbers and <code>dollar()</code> to format numbers as values in dollars or other currencies. There is a <a href="https://scales.r-lib.org/reference/">full list of <code>scales</code> functions on the package website</a>.</p>
<!--

You might have noticed on the map above that the density layer does not cover
the whole surface of the map. This is because there are some parts of the Bronx
that did not have any shootings in 2019. Some of these areas are under water,
for example. Since our map is about shootings, it would be better if we zoomed
in to just the places where shootings occurred. We can restrict the map to just
the area within the bounding box of the shootings data (i.e. the smallest
rectangle that contains all the shooting locations) by adding the `coord_sf()`
function to the stack of functions that we add to `ggplot()`. Since we have 
already saved the map as an object, we will do this by adding the new function 
to the existing object and then saving the result as a new object.


::: {.cell exercise='true' exercise.lines='17'}

:::


<div class="box extra-detail">

<h5 id="title-box1-title" class="box-title">What does the code 
`shootings_bbox[c(1, 3)]` do?</h5>

<div id="title-box1" class="box-content">

You might be wondering what the code `shootings_bbox[c(1, 3)]` does. When an R
object contains a sequence of values (`shootings_bbox` contains four values), we
can usually extract one value or more values by adding square brackets to the
end of the object name and then giving the index number of the value we want 
(the first value has the index 1, the second value has the index 2, etc.). This
is called *subsetting*. To subset a single value, just give the index inside
the square brackets, e.g. `shootings_bbox[1]`. To get subset multiple values,
give a vector (created with `c()`) of index numbers for the values you want.
R can subset values in lots of different ways for different types of values,
but we will discuss it in further detail if we need to later on.

</div>

</div>

<script>
$("#title-box1-title").click(function () { $("#section-title-box1").toggle("slow") })
</script>

-->
<p>We now have a basic map of shootings in the Bronx. This map isn’t good enough on its own, but we can use it to learn how to add supporting elements to a map.</p>
</section><section id="titles" class="level2" data-number="6.6"><h2 data-number="6.6" class="anchored" data-anchor-id="titles">
<span class="header-section-number">6.6</span> Titles</h2>
<p>A map title is one of the most important ways to add context to a map. Titles can either be <em>descriptive</em> or <em>declarative</em>. Descriptive titles simply state what data are shown on the map. For example, we might give our map the title “Shootings in the Bronx, 2019”. Declarative titles, on the other hand, state what you think the main conclusion should be that readers remember about the map. For example, we might use the title “Shootings are focused in the South Bronx”.</p>
<p>Declarative titles are usually more useful than descriptive titles because they help the reader to interpret the map. But writing a good declarative title is harder than writing a descriptive title, because it requires you to think about what is the main point that you want to make with the map. To help you come up with a good declarative title, you might want to try several different titles so that you can choose the one that communicates your message most clearly.</p>
<p>We can add a title to our map using the <code>labs()</code> (short for ‘labels’) function from the <code>ggplot2</code> package. We can use <code>labs()</code> to add labels to various different parts of a map or plot, but for now we will just use the argument <code>title</code> to set the title.</p>
<div class="cell" data-exercise="true">
<div class="cell-output-display">
<p><img src="index_files/figure-html/title-exercise3-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Sometimes our preferred title might be too long to fit on a map. In this case, we can break the title across two or more lines. We can do this manually by adding the characters <code>\n</code> (the character code for a new line) at the point where we want the text to start a new line. Alternatively, we can use the <code>str_wrap()</code> function from the <code>stringr</code> package to wrap the text automatically into lines of a given maximum length (specified using the <code>wrap</code> argument).</p>
<p>When you use a declarative title for your map, it is often useful to provide a <em>subtitle</em> containing descriptive information. Adding a subtitle is very easy using the <code>subtitle</code> argument to the <code>labs()</code> function.</p>
<div class="tutorial">
<p>Use the code above as a template to add a subtitle to your map explaining that the map shows fatal and non-fatal shootings in 2019.</p>
<div class="cell" data-exercise="true">

</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/title-exercise4-hint-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/title-exercise4-hint-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="using-captions-to-add-author-and-other-information" class="level3" data-number="6.6.1"><h3 data-number="6.6.1" class="anchored" data-anchor-id="using-captions-to-add-author-and-other-information">
<span class="header-section-number">6.6.1</span> Using captions to add author and other information</h3>
<p>The <code>labs()</code> function has another argument that we can use to add text to our map for context. The <code>caption</code> argument is used to add information such as the author, date and source of the data to a map or chart. We can put any information we like into the caption, using <code>str_wrap()</code> or the new-line character <code>\n</code> if necessary to stop the text overflowing the map.</p>
<div class="cell" data-exercise="true">
<div class="cell-output-display">
<p><img src="index_files/figure-html/title-exercise5-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>This code uses the <code>str_glue()</code> function from the <code>stringr</code> package to incorporate some automatically updated information (in this case, the current date) into the caption. <code>str_glue()</code> glues together any number of character strings separated by commas – in this case, the code includes two strings so that the lines of code do not become too long to easily read.</p>
<p><code>str_glue()</code> can also include the values of R objects and the results of R functions that are placed inside braces <code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code>. So the code <code>{lubridate::today()}</code> runs the function <code>today()</code> from the <code>lubridate</code> package and glues the result (the current date) into the text. If we had already loaded the <code>lubridate</code> library we could have just used the code <code>{today()}</code>, but since we do not need any other functions from <code>lubridate</code> for this analysis, we instead do not load the package but call the function by specifying which package it comes from using the <code>::</code> operator as in the previous tutorial.</p>
<div class="box notewell">
<p>When you use data to make maps, the data provider will often require you to acknowledge the source of that data. This is a legal requirement so it is important that you do this when required.</p>
<p>The base maps we use in this course use data from OpenStreetMap, which <a href="https://wiki.osmfoundation.org/wiki/Licence/Attribution_Guidelines">requires</a> people using its data to acknowledge that they have done so. The easiest way to do this is to add the text “Map data from OpenStreetMap” to the <code>caption</code> of your maps if they use base maps from OpenStreetMap.</p>
</div>
</section><section id="changing-the-appearance-of-titles-and-captions" class="level3" data-number="6.6.2"><h3 data-number="6.6.2" class="anchored" data-anchor-id="changing-the-appearance-of-titles-and-captions">
<span class="header-section-number">6.6.2</span> Changing the appearance of titles and captions</h3>
<p>We have added a title, subtitle and caption to our map, but you might not be happy with their appearance. You might want, for example, to move the caption down the visual hierarchy by making the text smaller and/or a lighter colour, or add some space between the subtitle and the map itself.</p>
<p>We can exercise almost complete control over the supporting elements of maps or charts made with <code>ggplot()</code> using the <code>theme()</code> function. One important thing to remember about <code>theme()</code> is that it only controls the non-data elements of a map – nothing you do with the <code>theme()</code> function will have any effect on the data elements of a map (in this case, the layer showing the density of shootings). To change the appearance of data layers within <code>ggplot()</code> maps, use the <code>geom_</code>, and <code>scale_</code> families of functions as we have learned in previous tutorials.</p>
<p>The <code>theme()</code> function has a lot of potential arguments. If you need help using the <code>theme()</code> function (or any function in R) you can view a manual page (including a list of arguments) for the function by:</p>
<ul>
<li>typing a question mark followed by the function name without parentheses (e.g.&nbsp;<code>?theme</code>) into the R console,</li>
<li>typing the function name without parentheses into the search box in the Help panel in RStudio, or</li>
<li>clicking on the function name anywhere in your R code to place the cursor on the function name, then pressing <code>F1</code> on your keyboard.</li>
</ul>
<p>Try opening the manual page for <code>theme()</code> now to see the list of possible arguments it can take. Fortunately, we will not need most of these arguments most of the time – <code>ggplot()</code> has default values built in for every value that can be changed using <code>theme()</code>, and these defaults will be reasonable in almost all cases.</p>
<p>To reduce the visual prominence of the map caption, we can change the value of the <code>plot.caption</code> argument to <code>theme()</code>. Since the caption is a text element (rather than a polygon, line, etc.), we can use the helper function <code>element_text()</code> to do this. The following code changes the colour of the caption text to a lighter grey and makes the text smaller relative to the default using the helper function <code>rel()</code> (for relative sizing) – <code>0.7</code> means the text will be 70% as big as it would have been by default.</p>
<div class="cell" data-exercise="true">
<div class="cell-output-display">
<p><img src="index_files/figure-html/title-exercise6-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>The helper function <code>element_text()</code> has arguments to control the appearance of text in different ways. As well as <code>colour</code> (or <code>color</code>, either is fine) and <code>size</code>, there are:</p>
<ul>
<li>
<code>family</code> controls the font used, e.g.&nbsp;Times New Roman or Helvetica,</li>
<li>
<code>face</code> controls the style of the font, i.e.&nbsp;‘plain’, ‘italic’, ‘bold’ or ‘bold.italic’,</li>
<li>
<code>hjust</code> controls the horizontal justification of the text, where 0 means left aligned, 0.5 means centred and 1 means right aligned,</li>
<li>
<code>vjust</code> controls the vertical justification, and</li>
<li>
<code>angle</code> controls the angle (in degrees) of the text (0 means horizontal),</li>
<li>
<code>lineheight</code> controls the space between lines if you have created a value that has more than one line (e.g.&nbsp;using <code>\n</code> or <code>str_wrap()</code>).</li>
</ul>
<p>The <code>margin</code> argument controls the space around the text. It is easiest to specify the value of <code>margin</code> using the helper function <code>margin()</code> designed for that purpose. You specify the top, right, bottom and left margin separately in that order – to remember the order, think ‘<strong>tr</strong>ou<strong>bl</strong>e’. The following code changes the margin around the map subtitle.</p>
<div class="tutorial">
<p>Change this code so that it <em>also</em> makes the subtitle 80% of the default size <em>and</em> changes the caption so that it is left aligned.</p>
<div class="cell" data-exercise="true" data-exercise.lines="17">
<div class="cell-output-display">
<p><img src="index_files/figure-html/title-exercise7-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
<div class="cell">

</div>
<div class="cell">

</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/title-exercise7-hint-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now that we have finished setting the text elements for our map, we can save it as a new object that we can use as the basis for the other objects we want to add.</p>
<div class="cell" data-exercise="true" data-exercise.lines="17">

</div>
</section></section><section id="legends" class="level2" data-number="6.7"><h2 data-number="6.7" class="anchored" data-anchor-id="legends">
<span class="header-section-number">6.7</span> Legends</h2>
<p>Legends are important for all but the simplest crime maps because they help readers to interpret the points, lines and polygons used to represent data on a particular map. Except for point maps containing only a small number of crimes (such as the map of homicide in downtown Atlanta that we produced in the first tutorial), crime maps will almost always need a legend to help users interpret them.</p>
<p>Producing a legend manually could be quite complicated, but fortunately <code>ggplot()</code> produces legends automatically. The reason the maps we have produced up to now haven’t included legends is that we have been suppressing the legends using the argument <code>legend.position = "none"</code> to the <code>theme()</code> function – look back at the code on the page ‘Creating and storing a map’ in this tutorial to see this code on the final line of the stack of functions added to <code>ggplot()</code>.</p>
<p><code>ggplot()</code> will add a legend to a map or chart whenever one or more layers of data are represented using an aesthetic property such as size, shape, colour or fill. In our current map, the density of shootings is represented using the fill colour of the polygons produced by the <code>hotspot_kde()</code> function, with darker colours representing more shootings.</p>
<p>To reveal the legend automatically generated, we can add another call to the <code>theme()</code> function to our existing <code>ggplot()</code> object. This overrides the previous code that set the legend position to <code>none</code>, instead placing the legend on the right-hand side of the plot. We only need to do this because we previously suppressed the legend – if we had not suppressed it, the legend would have appeared automatically.</p>
<div class="cell" data-exercise="true">
<div class="cell-output-display">
<p><img src="index_files/figure-html/legend-exercise1-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Our map now has a legend, but we may want to adjust its appearance by:</p>
<ul>
<li>changing the default legend title from “kde” to something more meaningful,</li>
<li>moving the legend down the visual hierarchy by making it smaller (at the moment it is almost as visually prominent as the data),</li>
<li>removing the potentially confusing raw density values.</li>
</ul>
<p>We can change the default legend title by once again using the <code>labs()</code> function. Since we want to change the title of the legend, you might reasonably think that we would do this using something like <code>labs(legend = "density")</code> but unfortunately that code would do nothing at all. Instead, we have to set the legend title using the aesthetic (colour, size, shape, etc.) that the legend represents. This makes it possible to specify multiple titles if there are separate legends for different layers that use different aesthetics. For example if a map used lines of different colours to show streets of different types and filled polygons to show the density of crime, it would be possible to have separate legends explaining each aesthetic. In this case, we’ve specified that the <code>kde</code> column in the data should control the fill aesthetic, so we can set the title for that legend using <code>fill = "title we want"</code>.</p>
<div class="cell" data-exercise="true">
<div class="cell-output-display">
<p><img src="index_files/figure-html/legend-exercise2-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>To make the legend smaller, we can use <code>theme()</code> in the same way as we did to change the appearance of the caption. We use the <code>legend.title</code> argument to format the legend title and the <code>legend.text</code> argument to format the labels for each value in the legend.</p>
<p>We will also make the colour bar in the legend (called the <em>key</em> by <code>ggplot()</code>) slightly smaller using the <code>legend.key.width</code> argument. To do this we will use the helper function <code>unit()</code>, which allows us to specify the size using any of several common units. In this case, we will specify the key size in lines (1 line = the height of one line of text) so that it is relative to the text size we have chosen.</p>
<p>At the same time, we will reduce the size of the legend title and the legend text (the numbers next to the colour bar), using the <code>legend.text</code> and <code>legend.title</code> arguments together with the the helper function <code>element_text()</code>. In both cases, we will set the text size relative to the default text size using the <code>rel()</code> helper function.</p>
<div class="cell" data-exercise="true">
<div class="cell-output-display">
<p><img src="index_files/figure-html/legend-exercise3-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Finally, we want to remove the raw density values, since these are difficult to interpret and might distract readers from the key message that darker colours on the map represent higher densities of shootings.</p>
<p>By default, <code>ggplot()</code> sets the label for each legend key based on the data. To specify our own labels, we can use the <code>labels</code> argument to the <code>scale_fill_distiller()</code> function that we previously used to set the colour scheme of the density layer on the map.</p>
<p>When we set colour bar labels manually, we have to also specify where on the colour bar we want those labels to appear. We do this using the <code>breaks</code> argument to <code>scale_fill_distiller()</code>, making sure the number of values we supply to the <code>breaks</code> argument is the same as the number of labels we’ve given to the <code>labels</code> argument (otherwise R will produce an error).</p>
<p>In this case, we want to add two labels (“higher” and “lower”), one at either end of the colour bar. We could look at <code>kde</code> column of the <code>shootings_kde</code> object to find the minimum and maximum values, but that would introduce the risk of us accidentally entering the wrong values. Instead, we can use the <code>pull()</code> function to extract the <code>kde</code> column from the <code>shootings_kde</code> dataset and then use the <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> function to find the minimum and maximum values. Putting this together, we get <code>breaks = range(pull(shootings_kde, "kde"))</code>.</p>
<div class="cell" data-exercise="true" data-exercise.lines="19">
<div class="cell-output cell-output-stderr">
<pre><code>Scale for fill is already present.
Adding another scale for fill, which will replace the existing scale.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/legend-exercise4-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>Now that we have finished formatting the legend, we can again store the map as an object that we can build on further.</p>
<div class="cell" data-exercise="true" data-exercise.lines="19">
<div class="cell-output cell-output-stderr">
<pre><code>Scale for fill is already present.
Adding another scale for fill, which will replace the existing scale.</code></pre>
</div>
</div>
</section><section id="scales-and-north-arrows" class="level2" data-number="6.8"><h2 data-number="6.8" class="anchored" data-anchor-id="scales-and-north-arrows">
<span class="header-section-number">6.8</span> Scales and north arrows</h2>
<p>The final elements we can add to our map are a scale bar and a north arrow, which can both be added using functions from the <code>ggspatial</code> package.</p>
<section id="scale-bars" class="level3" data-number="6.8.1"><h3 data-number="6.8.1" class="anchored" data-anchor-id="scale-bars">
<span class="header-section-number">6.8.1</span> Scale bars</h3>
<p>To add a scale bar, we can add a call to the <code>annotation_scale()</code> function to our existing <code>ggplot()</code> object.</p>
<div class="cell" data-exercise="true">
<div class="cell-output-display">
<p><img src="index_files/figure-html/scales-exercise1-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p>The default scale bar is a little too visually dominant for the low place it should have in the visual hierarchy of our map, and the default placement in the bottom-left corner happens to overlap with the highest density of shootings. We can change the scale bar using arguments to the <code>annotation_scale()</code> function:</p>
<ul>
<li>
<code>width_hint = 1/5</code> changes the (approximate) proportion of the map width across which the scale bar stretches,</li>
<li>
<code>style = "ticks"</code> changes the style of the scale bar to the less visually prominent line-and-tick-marks style, and</li>
<li>
<code>location = "br"</code> moves the scale bar to the bottom-right corner of the map.</li>
</ul>
<div class="cell" data-exercise="true">
<div class="cell-output-display">
<p><img src="index_files/figure-html/scales-exercise2-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</section><section id="north-arrows" class="level3" data-number="6.8.2"><h3 data-number="6.8.2" class="anchored" data-anchor-id="north-arrows">
<span class="header-section-number">6.8.2</span> North arrows</h3>
<p>We can add a north arrow using the <code>annotation_north_arrow()</code> function. The default arrow is too obtrusive to fit its position in the visual hierarchy, so we will change its appearance using the arguments:</p>
<ul>
<li>
<code>location = "tr"</code> to move the north arrow to the top-right corner, since we have put the scale bar in the bottom-right where the north arrow would be placed by default,</li>
<li>
<code>height = unit(1.5, "lines")</code> to make the arrow smaller, and</li>
<li>
<code>style = north_arrow_minimal(text_size = 8)</code> to use a smaller style of arrow, at the same time reducing the font size (measured in points) of the N symbol.</li>
</ul>
<div class="cell" data-exercise="true">
<div class="cell-output-display">
<p><img src="index_files/figure-html/scales-exercise3-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</section></section><section id="saving-maps" class="level2" data-number="6.9"><h2 data-number="6.9" class="anchored" data-anchor-id="saving-maps">
<span class="header-section-number">6.9</span> Saving maps</h2>
<p>Once you have a complete map, it is often useful to save it as an image file so that you can share it with others or embed it into a report or presentation. You can save plots created with <code>ggplot()</code> using the <code>ggsave()</code> function.</p>
<p>Before we do that, lets create a final map that includes a base map as well as some supporting elements. We won’t include a north arrow because north is at the top of the map and it’s unlikely anyone will be using this map for navigation. We will include a scale bar so that people looking at the map can see the approximate size of shooting hotspots. Remember we have already loaded the necessary packages, as well as data stored in the <code>shootings</code>, <code>precincts</code> and <code>shootings_kde</code> objects.</p>
<div class="box notewell">
<p>There is usually no need to save the map into several different objects (e.g.&nbsp; <code>shootings_map_titled</code> or <code>shootings_map_legend</code>) as we have done in this tutorial. We have only done that here so you could learn about the different contextual elements one by one.</p>
<p>It is usually much better to create a whole <code>ggplot()</code> stack in one go, since it is easier to keep track of all the elements that way. In the code below all the elements have been combined into a single <code>ggplot()</code> stack.</p>
</div>
<div class="cell" data-exercise="true" data-exercise.lines="44">
<div class="cell-output-display">
<p><img src="index_files/figure-html/save-exercise1-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
<p><code>ggsave()</code> can create image files in many different formats, including PNG, JPEG and PDF. <code>ggsave()</code> will determine which type of file to create according to the file extension of the file name that you specify. So <code>ggsave("bronx_shootings_2019.pdf", plot = shootings_map_legend)</code> produces a PDF file, while <code>ggsave("bronx_shootings_2019.jpg", plot = shootings_map_legend)</code> produces a JPEG image file.</p>
<p>You can specify the size of the image that will be saved using the <code>height</code> and <code>width</code> arguments. Note that for historical reasons these values are in <em>inches</em> by default, but you can change this to either centimetres (using <code>units = "cm"</code>), millimetres (using <code>units = "mm"</code>) or pixels (using <code>units = "px"</code>).</p>
<p>To share our map with others, lets save it as an A4-size PDF.</p>
<div class="cell" data-exercise="true">

</div>
<p>We can now use share this file by email, upload it to a website or embed it in another document.</p>
</section><section id="in-summary" class="level2" data-number="6.10"><h2 data-number="6.10" class="anchored" data-anchor-id="in-summary">
<span class="header-section-number">6.10</span> In summary</h2>
<div class="box welldone">
<p>In this tutorial we have learned about the importance of understanding the purpose for which people will use a map when making decisions about map design. We have also learned about how establishing a visual hierarchy on our map can help steer readers towards the most-important elements and how to add titles, legends and scale bars to maps in R.</p>
</div>
<div class="box reading">
<p>You can find out more about the topics we have covered in this tutorial:</p>
<ul>
<li>For a short summary of research into how people read maps and what that tells us about how to design a map, see <a href="https://doi.org/10.4324/9781315736822.ch3">Cartography, visual perception and cognitive psychology</a> by Amy Griffin.</li>
<li>For a more-detailed explanation of how visual hierarchy can be applied to maps, see <a href="https://gistbok.ucgis.org/bok-topics/visual-hierarchy-and-layout">Visual Hierarchy and Layout</a>.</li>
<li>For more examples of how maps can mislead, read <a href="https://www.ft.com/content/65b5df0e-49ff-11e8-8ee8-cae73aab7ccb">How to lie with maps</a> by Alan Smith.</li>
</ul>
</div>
<p class="full-width-image">
<a href="https://xkcd.com/1472/"><img src="https://imgs.xkcd.com/comics/geography.png" alt="The place I'd least like to live is the farm in the background of those diagrams showing how tornadoes form."></a>
</p>
<p class="credits">
<a href="https://xkcd.com/1459/">XKCD.com comic ‘Geography’</a> licensed under the <a href="https://xkcd.com/license.html">Creative Commons Attribution-NonCommercial license</a>.
</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../05_your_second_crime_map/index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Your second crime map</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../07_handling_bugs/index.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Handling bugs in your code</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>